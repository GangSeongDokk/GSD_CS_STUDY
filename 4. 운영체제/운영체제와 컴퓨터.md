# 3.1 운영체제와 컴퓨터

## 3.3.1 운영체제의 역할과 구조

### 운영체제(Operating System)란?

- 컴퓨터라고 하는 하드웨어 장치를 사람이 사용할 수 있도록 환경을 제공하는 소프트웨어

### 운영체제의 역할

- 자원 관리(`효율성`)

  - 프로세스 관리
    - 운영체제에서 `응용 프로그램의 실행`은 `프로세스의 생성`으로 이루어짐
    - 프로세스를 생성하고 종료하거나, 프로세스간 통신 등을 수행
  - 메모리 관리
    - `응용 프로그램에 메모리를 할당`하고 사용하지 않는 메모리는 `회수`, 또한 부족한 메모리는 디스크를 사용해 `가상 메모리`로 운영
  - 파일 관리
    - 하드디스크를 `물리적 혹은 논리적으로 분할`하고 운영체제에서 사용할 수 있도록 `마운팅` 해주는 기능
    - 파일이나 디렉토리를 생성하고 관리할 수 있음

- 자원 보호(`안정성`)

  - CPU, 메모리 등에 대한 사용자와 응용 프로그램의 직접적인 접근을 제한

- 하드웨어 인터페이스 제공(`확장성`)

  - `컴퓨터와 연결된 각종 하드웨어`(마우스, 키보드, 모니터 등)들과 데이터를 주고받는 것을 관리
  - 마우스, 키보드와 같은 장치를 복잡한 과정없이 사용할 수 있도록 `하드웨어 인터페이스(장치 드라이버)`를 제공

- 소프트웨어 인터페이스 제공(`편리성`)
  - 사용자가 운영체제를 편리하게 사용할 수 있도록 화면을 통해 볼 수 있고, 마우스나 키보드, 혹은 터치로 조작할 수 있는 기능을 제공

### 운영체제의 구조

![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcdWK5l%2FbtrXrT5lSdN%2F2XRwbNtc6M7jtSEZZITL21%2Fimg.png)

- 운영체제는 크게 인터페이스(GUI)와 커널(Kernel)로 나뉨
- 커널은 프로세스 관리, 메모리 관리, 저장장치 관리와 같은 핵심적인 기능을 담당하며 운영체제의 성능을 좌우함.
- 커널 내부에는 `시스템콜`과 `드라이버`가 존재

> ### 커널
>
> - 커널은 `프로세스, 메모리, 파일 시스템, 입출력, 프로세스간의 통신 과 같은 핵심 역할`을 담당
> - 위 기능들의 구현 방식에 따라 단일형(초창기의 커널 구조), 계층형, 마이크로 구조로 나뉨
> - Window를 비롯한 현대의 운영체제는 대부분 `계층형 구조`로 되어있음 -> 버그나 오류가 생길 경우, 해당 계층만 수정하면 되기 때문에 디버깅이 쉬움
>
> ### 시스템 콜
>
> - 운영체제가 커널에 접근하기 위한 인터페이스
> - `커널은 자원에 대한 직접적인 접근을 차단`하기 때문에 자원을 이용하기 위한 인터페이스가 필요
> - ex) 응용 프로그램이 하드디스크에 데이터를 저장하려고 하면, 직접 하드디스크의 특정 위치에 데이터를 저장하는 것이 아니라 커널을 통해 데이터 저장을 요청하게 됨
>
> ### 드라이버
>
> - 응용 프로그램이 아닌 `하드웨어의 인터페이스 역할`
> - 커널 내부의 드라이버는 입출력 정도만 간단하게 제어하고, 개별 하드웨어의 특성을 반영한 소프트웨어(장치 드라이버)는 추가적인 드라이버를 설치하여 함께 실행되도록 함
>
> ### Modebit
>
> - 시스템 콜이 작동할 때 유저모드(modebit = 1)와 커널모드(modebit = 0)로 구분하는 플래그
> - 카메라, 키보드 등의 I/O 디바이스가 운영체제를 통해서만 작동할 수 있게 제한
> - ex)유저 프로그램이 카메라를 이용하려고 할 때 시스템 콜을 호출하고 modebit를 1에서 0으로 바꾸며 커널모드로 변경한 후 카메라 자원을 이용하는 로직을 수행

## 3.1.2 컴퓨터의 요소

- 컴퓨터를 구성하고 있는 하드웨어(기계적 장치)
- 크게 중앙처리장치, 기억장치, 입출력 장치로 나뉨

### CPU(Central Processing Unit)

- CPU는 산술논리연산장치(ALU), 제어장치(CU), 레지스터로 구성되어있다.

> ### 산술논리연산장치(ALU)
>
> - 산술 연산(덧셈, 뺄셈)과 논리 연산을 담당
>
> ### 제어장치(CU)
>
> - 명령어의 해석과 실행을 담당
>
> ### 레지스터
>
> - CPU와 직접 연결되어 있어 연산 속도가 빠른 임시 기억장치
> - CPU는 자체적으로 데이터를 저장할 방법이 없기 때문에 레지스터를 거쳐 데이터를 전달함
>
> ### 시스템 버스
>
> - `하드웨어 구성 요소를 물리적으로 연결하는 선`
> - 각 구성 요소가 데이터를 전달하는 통로
> - 데이터 버스
>   - CPU와 기타 장치 사이에서 데이터를 전달하는 통로
>   - 양방향 버스
> - 주소 버스
>   - 데이터를 정확히 실어 나르기 위해서는 기억장치의 `주소`를 정해주어야 함
>   - CPU가 주기억 장치나 입출력 장치로 `기억장치의 주소를 전달`
>   - 단방향 버스
> - 제어 버스
>   - CPU가 기억장치나 입출력 장치에 `제어 신호`를 전달하는 통로
>   - 제어 신호에는 읽기 및 쓰기, 버스 요청 및 승인, 인터럽트 요청 및 승인, 클락, 리셋 등이 있음
>   - 양방향 버스

### CPU의 연산 처리 과정

1. 주기억 장치가 입력 장치에서 입력 받은 데이터 또는 보조기억장치에서 저장된 프로그램을 메모리에 로드 -> 레지스터에도 전달
2. 제어장치가 ALU에게 레지스터의 코드를 계산하라고 명령
3. 연산 후 계산된 값을 레지스터에서 메모리로 다시 전달

### 인터럽트

- CPU가 특정 기능을 수행하는 도중 급하게 다른 일을 처리하고자 할 때 사용할 수 있는 기능
- 한 개의 CPU는 하나의 작업만 처리할 수 있으므로, 우선 순위가 급한 일을 먼저 처리할 필요가 있을 때 대처할수 있는 방안이 필요

> ### 하드웨어 인터럽트(외부 인터럽트)
>
> - 입출력 인터럽트 : 키보드, 마우스와 같은 I/O 디바이스에서 발생하는 인터럽트
> - 전원 이상 인터럽트 : 전원에 이상이 있을 경우
> - 기계 고장 인터럽트 : CPU등의 기능적인 동작 오류가 발생한 경우
>
> ### 소프트웨어 인터럽트(내부 인터럽트)
>
> - 잘못된 명령이나 데이터를 사용할 때 발생하는 인터럽트
> - 0으로 나누는 경우, 오버플로우 및 언더플로우, 프로그램 상의 오류 등

### DMA(Direct Memory Access) 컨트롤러

- 메모리 버퍼, 포인터, 카운터를 사용하여 I/O 디바이스가 메모리에 직접 접근할 수 있도록 하는 하드웨어 장치
- CPU에 인터럽트 요청 및 처리가 집중되는 것을 방지

### 메모리

- 전자회로에서 데이터나 상태, 명령어 등을 기록하는 장치
- 보통 RAM(Random Access Memory)를 일컬어 메모리라고도 함
- 메모리는 `작업장의 크기`에 비유할 수 있음.

### 타이머

- 정해진 시간이 흐른 후 운영체제에게 제어권이 넘어가도록 인터럽트를 발생시킴
- CPU를 특정 프로그램이 독점하는 것으로부터 보호

### 디바이스 컨트롤러

- 각종 I/O 디바이스들을 관리
- local buffer에 데이터를 임시로 저장
- I/O 과정이 끝나면 interrupt로 CPU에게 알림
