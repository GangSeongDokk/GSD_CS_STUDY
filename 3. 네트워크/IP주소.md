# IP주소
- ARP
- 홉바이홉 통신
- IP 주소 체계
- IP 주소를 이용한 위치 정보

<br><br>

## ARP
- 물리적 주소(MAC) -> ARP -> 논리적 주소(IP)
    - A -> `ARP Request 브로드캐스트 -> B -> ARP Reply 유니캐스트` -> A
    - 브로드캐스트 : 연결된 모두에게 보내는 방식 / 유니캐스트 : 식별된 하나의 네트워크로 1:1로 보내는 방식
    - IP : 가상주소, ex) 120.70.80.3
    - MAC : 실제주소, ex) A6:BE:C4:D5:E7:F8
- ARP(Address Resolution Protocol) : IP 주소로부터 MAC 주소를 구하는 IP와 MAC 주소의 다리 역할을 하는 프로토콜
- 반대 역할은 RARP(MAC -> IP)
- IP/MAC

<br><br>

## 홉바이홉 통신
- A -> 서브네트워크 -> 라우팅 테이블 -> 서브네트워크 -> 라우팅 테이블 -> B
- IP 주소를 통해 통신하는 과정
    - 라우팅 테이블의 IP를 통해 시작 주소부터 다음 IP로 계속해서 이동 하는 `라우팅`과정을 거쳐 패킷이 최종 목적지까지 도달하는 통신
- hop : 건너뛰는 모습, 통시남ㅇ에서 각 패킷이 여러 개의 라우터를 건너가는 모습을 비유적으로 표현

### 라우팅 테이블(routing table)
- 라우터에 들어가 있는 목적지 정보들과 그 목적지로 가기 위한 방법들이 들어 있는 리스트
- 송신지에서 수신지까지 도달하기 위해 사용
- 게이트웨이와 모든 목적지를 가기위한 다음 라우터 정보 가지고 있음

### 게이트웨이(gateway)
- 네트워크간의 연결해주는 것
- 서로 다른 통신망, 프로토콜을 사용하는 네트워크 간의 통신을 가능하게 하는 관문 역할을하는 컴퓨터나 소프트웨어를 두루 일컫는 말
- 게이트웨이와 라이팅테이블 확인법(windows)
```cmd
~~~~>netstat -r
```

<br><br>

## IP 주소 체계
- IPv4와 IPv6가 있음

||IPv4|IPv6|
|------|---|---|
|구분|32비트를 8단위로 점을 찍어 표기|64비트를 16비트 단위로 점을 찍어 표기|
|예시|123.45.67.89|2001:db8::ff00:42:8329|
|현황|현재 가장 많이 사용|추세로 가고 있음|

### 클래스 기반 할당 방식
- 초기방식
- 단점 : 사용하는 주소보다 버리는 주소가 많음 -> DHCP와 IPv6, NAT
    - 사용불가 주소
        - 네트워크 구별 주소 ex) 12.0.0.0
        - 브로드캐스트용 주소 ex) 12.255.255.255
- 다섯 개의 클래스 기반 할당(A, B, C, D, E)
- 구조 : 네트워크 주소 + 호스트 주소(컴퓨터에 부여)
- 클래스 D : 멀티캐스트 통신
- 클래스 E : 예비용
- 클래스 A, B, C : 일대일 통신
    - 0.0.0.0 형식
    - 00000000.00000000.00000000.00000000 비트로 풀었을 때
    - `00000000`.00000000.00000000.00000000 : 구분비트

||구조|범위|구분비트|
|---|---|---|---|
|A 클래스|**0**.0.0.0|0.0.0.0 ~ 127.255.255.255|0(10) 제일 왼쪽 비트|
|B 클래스|**128.0**.0.0|128.0.0.0 ~ 191.255.255.255|10(10)|
|C 클래스|**192.0.0**.0|192.0.0.0 ~ 223.255.255.255|110(10)|
- **강조 : 네트워크 주소** / 일반 : 호스트 주소

#### 네트워크 구별 주소
- 12.0.0.0 / ~~~~~~~~~~~ / 12.255.255.255
- (네트워크 구별주소 / 호스트 주소 / 브로드 캐스트 주소)

### DHCP(Dynamic Host Configuration Protocol)
- IP 주소 및 기타 통신 매개변수를 자동으로 할당하기 위한 네트워크 관리 프로토콜
- 네트워크 IP주소를 수동으로 설치할 필요 없이 인터넷에 접속할 때마다 자동으로 IP주소 할당할 수 있음
- 많은 라우터와 게이트웨이 장비에 DHCP 기능이 있음, 대부분 가정용 네트워크 IP 주소를 할당

<br><br>

## NAT(Network Address Translation)
-패킷이 라우팅 장치를 통해 전송되는 동안 패킷의 IP 주소 정보를 수정하여 IP 주소를 다른 주소로 매핑하는 방법
- IP와 사설 IP로 나누어 많은 주소 처리
    - 들어온 공인 IP주소로 각각 기기에게 새로운 IP 부여하여 한 IP로 다양한 기기 사용 가능하게 해줌(반대의 경우도 가능)
- 예 : ICS, RRAS, Netfilter

- 공유기와 NAT
    - NAT를 쓰는 이유는 주로 여러 대의 호스트가 하나의 공인 IP 주소를 사용하여 인터넷에 접속하기 위함(하나의 회선 -> 여러대의 PC 사용)
- 보안 : 내부와 외부 IP주소가 다르기 때문에 보안에 도움을 줌
- 단점 : 한 회선으로 여러명이 사용 -> 호스트 증가 -> 접속 속도 느려질 수 있음

<br><br>

## IP 주소를 이용한 위치 정보
- https://mylocation.co.kr/
